<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Quiz</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #fff;
      }
      .header {
        background-color: lightblue;
        width: 100%;
        text-align: center;
        padding: 20px 0;
        color: #333;
        font-size: 2rem;
        position: fixed;
        top: 0;
        left: 0;
      }
      .container {
        background-color: lightblue;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        text-align: center;
        margin-top: 100px;
        width: 300px;
      }
      select {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        font-size: 1rem;
      }
      #quiz-section {
        display: none;
        margin-top: 20px;
      }
      #question {
        font-size: 1.2rem;
        margin: 20px 0;
      }
      .option-item {
        margin: 10px 0;
        text-align: left;
      }
      .option-item input {
        margin-right: 10px;
      }
      button {
        width: 100%;
        padding: 10px;
        background-color: #4a4a4a;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        margin-top: 10px;
      }
      button:hover {
        background-color: #333;
      }
      .correct {
        color: #28a745;
      }
      .incorrect {
        color: #dc3545;
      }
    </style>
  </head>
  <body>
    <div class="header">Online Quiz</div>
    <div class="container">
      <div id="selection-section">
        <label>Choose Subject:</label>
        <select id="subject" onchange="checkSelection()">
          <option value="">--Select Subject--</option>
          <option value="math">Mathematics</option>
          <option value="science">Science</option>
          <option value="history">History</option>
        </select>
        <label>Choose Quiz Number:</label>
        <select id="quiz-number" onchange="checkSelection()">
          <option value="">--Select Quiz--</option>
          <option value="1">Quiz 1</option>
          <option value="2">Quiz 2</option>
          <option value="3">Quiz 3</option>
        </select>
      </div>
      <div id="quiz-section">
        <h2 id="question"></h2>
        <div id="options"></div>
        <button id="next-btn" onclick="nextQuestion()" style="display: none">
          Next
        </button>
      </div>
    </div>
    <script>
      const questions = {
        math: [
          {
            question: "What is 2 + 2?",
            type: "single",
            options: ["2", "3", "4", "5"],
            answer: "4",
          },
          {
            question: "Select all even numbers:",
            type: "multiple",
            options: ["1", "2", "3", "4"],
            answer: ["2", "4"],
          },
        ],
        science: [
          {
            question: "What is H2O?",
            type: "single",
            options: ["Oxygen", "Hydrogen", "Water", "Carbon Dioxide"],
            answer: "Water",
          },
          {
            question: "Select all gases:",
            type: "multiple",
            options: ["Oxygen", "Gold", "Carbon Dioxide", "Helium"],
            answer: ["Oxygen", "Carbon Dioxide", "Helium"],
          },
        ],
        history: [
          {
            question: "Who was the first President of the USA?",
            type: "single",
            options: ["Washington", "Lincoln", "Jefferson", "Adams"],
            answer: "Washington",
          },
          {
            question: "Select all WWII years:",
            type: "multiple",
            options: ["1939", "1945", "1950", "1941"],
            answer: ["1939", "1945", "1941"],
          },
        ],
      };

      let currentSubject = "";
      let currentQuestions = [];
      let currentQuestionIndex = 0;
      let score = 0;

      function checkSelection() {
        const subject = document.getElementById("subject").value;
        const quizNumber = document.getElementById("quiz-number").value;

        if (subject && quizNumber) {
          currentSubject = subject;
          currentQuestions = questions[subject];
          currentQuestionIndex = 0;
          score = 0;
          document.getElementById("selection-section").style.display = "none";
          document.getElementById("quiz-section").style.display = "block";
          displayQuestion();
        }
      }

      function displayQuestion() {
        if (currentQuestionIndex < currentQuestions.length) {
          const q = currentQuestions[currentQuestionIndex];
          document.getElementById("question").textContent = q.question;
          const optionsDiv = document.getElementById("options");
          optionsDiv.innerHTML = "";
          q.options.forEach((option) => {
            const div = document.createElement("div");
            div.classList.add("option-item");
            if (q.type === "single") {
              const radio = document.createElement("input");
              radio.type = "radio";
              radio.name = "answer";
              radio.value = option;
              radio.onchange = () => selectOption(option);
              div.appendChild(radio);
            } else if (q.type === "multiple") {
              const checkbox = document.createElement("input");
              checkbox.type = "checkbox";
              checkbox.value = option;
              checkbox.onchange = () => selectOption(option);
              div.appendChild(checkbox);
            }
            const label = document.createElement("label");
            label.textContent = option;
            div.appendChild(label);
            optionsDiv.appendChild(div);
          });
          document.getElementById("next-btn").style.display = "none";
        } else {
          endQuiz();
        }
      }

      function selectOption(selected) {
        const q = currentQuestions[currentQuestionIndex];
        const inputs = document.querySelectorAll("#options input");
        let allSelected = [];

        inputs.forEach((input) => {
          if (
            (q.type === "single" && input.checked) ||
            (q.type === "multiple" && input.checked)
          ) {
            allSelected.push(input.value);
          }
        });

        inputs.forEach((input) => {
          const label = input.nextSibling;
          if (q.answer.includes(input.value)) {
            label.classList.add("correct");
          } else if (
            allSelected.includes(input.value) &&
            !q.answer.includes(input.value)
          ) {
            label.classList.add("incorrect");
          }
          input.disabled = true;
        });

        if (q.type === "single" && allSelected[0] === q.answer) score++;
        else if (
          q.type === "multiple" &&
          allSelected.sort().join() === q.answer.sort().join()
        )
          score++;

        document.getElementById("next-btn").style.display = "block";
      }

      function nextQuestion() {
        currentQuestionIndex++;
        displayQuestion();
      }

      function endQuiz() {
        alert(
          `Quiz ended! Your score: ${score} out of ${currentQuestions.length}`
        );
        location.reload();
      }
    </script>
  </body>
</html>
